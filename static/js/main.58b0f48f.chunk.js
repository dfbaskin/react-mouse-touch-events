(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(34)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(23),a=n.n(c),u=n(13);function i(e){var t=e.isActive,n=e.box,r=n.top,c=n.left,a=n.width,u=n.height,i=n.text,f={className:"box"+(t?" active":""),style:{top:r,left:c,width:a,height:u}};return o.a.createElement("div",f,i)}var f=n(6),l={boxes:[],selectedIndex:-1,editMode:!1},s=O("CREATE_BOXES"),b=O("SELECT_BOX_AT_POINT"),d=O("MOVE_BOX"),p=O("SET_BOX_EDIT_MODE"),v=O("UPDATE_SELECT_BOX"),x=function(e){var t=new Map(e.map(function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return[n.toString(),r]}));return function(e,n){var r=t.get(n.type)||function(){return e};return r(e,n)}}([[s,function(e,t){var n=t.payload,r=n.count,o=n.width,c=n.height,a=new Array(r).fill(0).map(function(e,t){return{id:"box-".concat(t+1),top:Math.random()*(c-70),left:Math.random()*(o-200),width:200,height:70,text:"Box ".concat(t+101)}});return Object(f.a)({},e,{boxes:a})}],[b,function(e,t){var n=t.payload,r=n.x,o=n.y,c=e.boxes.reduce(function(t,n,c){var a=n.left,u=n.left+n.width,i=n.top,f=n.top+n.height;return r>=a&&r<=u&&o>=i&&o<=f&&(-1!==t&&c!==e.selectedIndex||(t=c)),t},-1);return Object(f.a)({},e,{selectedIndex:c})}],[d,function(e,t){var n=e.boxes,r=e.selectedIndex;if(-1===r)return e;var o=t.payload,c=o.x,a=o.y,u=o.offsetX,i=o.offsetY,l=Object(f.a)({},n[r],{left:c-u,top:a-i});return Object(f.a)({},e,{boxes:n.map(function(e,t){return t===r?l:e})})}],[p,function(e,t){var n=t.payload.editMode;return Object(f.a)({},e,{editMode:n})}],[v,function(e,t){var n=e.boxes,r=e.selectedIndex;if(-1===r)return e;var o=t.payload.box;return Object(f.a)({},e,{boxes:n.map(function(e,t){return t===r?o:e})})}]]);function O(e){function t(t){return{type:e,payload:t}}return t.toString=function(){return e},t}var j={top:0,left:-9999,width:200,height:70};function h(e){var t=e.box,n=e.onBoxModified,c=e.cancelEditMode,a=Object(r.useState)(""),i=Object(u.a)(a,2),l=i[0],s=i[1],b=Object(r.useRef)(null);Object(r.useEffect)(function(){t&&(b.current.focus(),s(t.text),setTimeout(function(){b.current.select()}))},[t]);var d=t||j,p={className:"box active editor",style:{top:d.top,left:d.left,width:d.width,height:d.height}},v={type:"text",value:l,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){t&&("Enter"===e.key?(e.preventDefault(),n(Object(f.a)({},t,{text:l})),c()):"Escape"===e.key&&(e.preventDefault(),c()))},onBlur:function(){t&&(n(Object(f.a)({},t,{text:l})),c())},ref:b};return o.a.createElement("div",p,o.a.createElement("input",v))}var m=n(41),E=n(24),w=n(37),g=n(40),y=n(38),M=n(39),C=300;function I(e,t){var n=e.clientX,r=e.clientY,o=e.target,c=t.getBoundingClientRect(),a=c.left,u=c.top,i=o.getBoundingClientRect();return{x:n-a,y:r-u,offsetX:n-i.left,offsetY:r-i.top}}function S(e,t){var n=Object(r.useRef)(function(){var e=Date.now();return function(){var t=Date.now(),n=t-e;return e=t,n}}()),o=Object(r.useRef)({pointerDownSubject:new m.a,pointerMoveSubject:new m.a,pointerUpSubject:new m.a}),c=Object(r.useCallback)(function(r){var c=I(r,e.current);n.current()>C?(e.current.setPointerCapture(r.pointerId),o.current.pointerDownSubject.next(c)):t.editItem(c)},[e,n,t]),a=Object(r.useCallback)(function(t){var n=I(t,e.current);o.current.pointerMoveSubject.next(n)},[e]),u=Object(r.useCallback)(function(t){var n=I(t,e.current);o.current.pointerUpSubject.next(n)},[e]),i=Object(r.useCallback)(function(t){e.current.releasePointerCapture(t.pointerId)},[e]);return Object(r.useEffect)(function(){var e=o.current.pointerDownSubject.asObservable(),n=o.current.pointerMoveSubject.asObservable(),r=o.current.pointerUpSubject.asObservable(),c=e.pipe(Object(E.a)(function(e){return Object(f.a)({},e,{found:t.findItem(e)})}),Object(w.a)(function(e){return e.found}),Object(g.a)(function(e){var o=e.offsetX,c=e.offsetY;return n.pipe(Object(y.a)(function(e){var n=e.x,r=e.y;t.dragItem({x:n,y:r,offsetX:o,offsetY:c})}),Object(M.a)(r.pipe(Object(y.a)(function(){t.dragComplete()}))))})).subscribe();return function(){c.unsubscribe()}},[t]),{onPointerDown:c,onPointerMove:a,onPointerUp:u,onPointerCancel:i}}n(31);function P(){var e=Object(r.useReducer)(x,l),t=Object(u.a)(e,2),n=t[0],c=n.boxes,a=n.selectedIndex,f=n.editMode,O=t[1],j=Object(r.useRef)(null);Object(r.useEffect)(function(){var e=j.current.getBoundingClientRect(),t=e.width,n=e.height;O(s({width:t,height:n,count:10}))},[]);var m=Object(r.useCallback)(function(e){var t=e.x,n=e.y;O(b({x:t,y:n})),O(p({editMode:!0}))},[]),E=Object(r.useCallback)(function(e){var t=e.x,n=e.y;return O(b({x:t,y:n})),!0},[]),w=Object(r.useCallback)(function(e){var t=e.x,n=e.y,r=e.offsetX,o=e.offsetY;O(d({x:t,y:n,offsetX:r,offsetY:o}))},[]),g=Object(r.useCallback)(function(){},[]),y=Object(r.useMemo)(function(){return{editItem:m,findItem:E,dragItem:w,dragComplete:g}},[m,E,w,g]),M=S(j,y),C=M.onPointerDown,I=M.onPointerMove,P=M.onPointerUp,k=M.onPointerCancel,D={className:"boxes",ref:j,onPointerDown:C,onPointerMove:I,onPointerUp:P,onPointerCancel:k},B={box:f?c[a]:void 0,onBoxModified:function(e){O(v({box:e}))},cancelEditMode:function(){O(p({editMode:!1}))}};return o.a.createElement("div",D,o.a.createElement(h,B),c.map(function(e,t){return o.a.createElement(i,{key:e.id,box:e,isActive:t===a})}))}n(32);n(33);a.a.render(o.a.createElement(function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h2",null,"React Mouse/Touch Events Demo"),o.a.createElement("p",null,"Source:",o.a.createElement("a",{href:"https://github.com/dfbaskin/react-mouse-touch-events"},"https://github.com/dfbaskin/react-mouse-touch-events"))),o.a.createElement("div",null,o.a.createElement(P,null)))},null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.58b0f48f.chunk.js.map