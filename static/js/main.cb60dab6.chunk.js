(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){e.exports=n(36)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(25),a=n.n(c),i=n(6);function u(e){var t=e.isActive,n=e.box,o=n.top,c=n.left,a=n.width,i=n.height,u=n.text,l={className:"box"+(t?" active":""),style:{top:o,left:c,width:a,height:i}};return r.a.createElement("div",l,u)}var l=n(9),f={boxes:[],selectedIndex:-1,editMode:!1},d=h("CREATE_BOXES"),s=h("SELECT_BOX_AT_POINT"),b=h("MOVE_BOX"),p=h("SET_BOX_EDIT_MODE"),v=h("UPDATE_SELECT_BOX"),x=function(e){var t=new Map(e.map(function(e){var t=Object(i.a)(e,2),n=t[0],o=t[1];return[n.toString(),o]}));return function(e,n){var o=t.get(n.type)||function(){return e};return o(e,n)}}([[d,function(e,t){var n=t.payload,o=n.count,r=n.width,c=n.height,a=new Array(o).fill(0).map(function(e,t){return{id:"box-".concat(t+1),top:Math.random()*(c-70),left:Math.random()*(r-200),width:200,height:70,text:"Box ".concat(t+101)}});return Object(l.a)({},e,{boxes:a})}],[s,function(e,t){var n=t.payload,o=n.x,r=n.y,c=e.boxes.reduce(function(t,n,c){var a=n.left,i=n.left+n.width,u=n.top,l=n.top+n.height;return o>=a&&o<=i&&r>=u&&r<=l&&(-1!==t&&c!==e.selectedIndex||(t=c)),t},-1);return Object(l.a)({},e,{selectedIndex:c})}],[b,function(e,t){var n=e.boxes,o=e.selectedIndex;if(-1===o)return e;var r=t.payload,c=r.x,a=r.y,i=r.offsetX,u=r.offsetY,f=Object(l.a)({},n[o],{left:c-i,top:a-u});return Object(l.a)({},e,{boxes:n.map(function(e,t){return t===o?f:e})})}],[p,function(e,t){var n=t.payload.editMode;return Object(l.a)({},e,{editMode:n})}],[v,function(e,t){var n=e.boxes,o=e.selectedIndex;if(-1===o)return e;var r=t.payload.box;return Object(l.a)({},e,{boxes:n.map(function(e,t){return t===o?r:e})})}]]);function h(e){function t(t){return{type:e,payload:t}}return t.toString=function(){return e},t}var m={top:0,left:-9999,width:200,height:70};function O(e){var t=e.box,n=e.onBoxModified,c=e.cancelEditMode,a=Object(o.useState)(""),u=Object(i.a)(a,2),f=u[0],d=u[1],s=Object(o.useRef)(null);Object(o.useEffect)(function(){t&&(s.current.focus(),d(t.text),setTimeout(function(){s.current.select()}))},[t]);var b=t||m,p={className:"box active editor",style:{top:b.top,left:b.left,width:b.width,height:b.height}},v={type:"text",value:f,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){t&&("Enter"===e.key?(e.preventDefault(),n(Object(l.a)({},t,{text:f})),c()):"Escape"===e.key&&(e.preventDefault(),c()))},onBlur:function(){t&&(n(Object(l.a)({},t,{text:f})),c())},ref:s};return r.a.createElement("div",p,r.a.createElement("input",v))}var j=n(42),E=n(39),g=n(41),w=n(40),y=300;function M(e,t){var n=e.clientX,o=e.clientY,r=e.target,c=t.getBoundingClientRect(),a=c.left,i=c.top,u=r.getBoundingClientRect();return{x:n-a,y:o-i,offsetX:n-u.left,offsetY:o-u.top}}function C(e,t){var n=Object(o.useRef)(function(){var e=Date.now();return function(){var t=Date.now(),n=t-e;return e=t,n}}()),r=Object(o.useRef)({pointerDownSubject:new j.a,pointerMoveSubject:new j.a,pointerUpSubject:new j.a}),c=Object(o.useCallback)(function(o){var c=M(o,e.current);n.current()>y?(e.current.setPointerCapture(o.pointerId),r.current.pointerDownSubject.next(c)):t.editItem(c)},[e,n,t]),a=Object(o.useCallback)(function(t){var n=M(t,e.current);r.current.pointerMoveSubject.next(n)},[e]),i=Object(o.useCallback)(function(t){var n=M(t,e.current);r.current.pointerUpSubject.next(n)},[e]),u=Object(o.useCallback)(function(t){e.current.releasePointerCapture(t.pointerId)},[e]);return Object(o.useEffect)(function(){var e=r.current.pointerDownSubject.asObservable(),n=r.current.pointerMoveSubject.asObservable(),o=r.current.pointerUpSubject.asObservable(),c=e.pipe(Object(E.a)(function(e){t.findItem(e)}),Object(g.a)(function(e){var r=e.offsetX,c=e.offsetY;return n.pipe(Object(E.a)(function(e){var n=e.x,o=e.y;t.dragItem({x:n,y:o,offsetX:r,offsetY:c})}),Object(w.a)(o.pipe(Object(E.a)(function(){t.dragComplete()}))))})).subscribe();return function(){c.unsubscribe()}},[t]),{onPointerDown:c,onPointerMove:a,onPointerUp:i,onPointerCancel:u}}n(24);function B(){var e=Object(o.useReducer)(x,f),t=Object(i.a)(e,2),n=t[0],c=n.boxes,a=n.selectedIndex,l=n.editMode,h=t[1],m=Object(o.useRef)(null);Object(o.useEffect)(function(){var e=m.current.getBoundingClientRect(),t=e.width,n=e.height;h(d({width:t,height:n,count:10}))},[]);var j=Object(o.useCallback)(function(e){var t=e.x,n=e.y;h(s({x:t,y:n})),h(p({editMode:!0}))},[]),E=Object(o.useCallback)(function(e){var t=e.x,n=e.y;h(s({x:t,y:n}))},[]),g=Object(o.useCallback)(function(e){var t=e.x,n=e.y,o=e.offsetX,r=e.offsetY;h(b({x:t,y:n,offsetX:o,offsetY:r}))},[]),w=Object(o.useCallback)(function(){},[]),y=Object(o.useMemo)(function(){return{editItem:j,findItem:E,dragItem:g,dragComplete:w}},[j,E,g,w]),M=C(m,y),B=M.onPointerDown,I=M.onPointerMove,P=M.onPointerUp,k=M.onPointerCancel,S={className:"boxes",ref:m,onPointerDown:B,onPointerMove:I,onPointerUp:P,onPointerCancel:k},D={box:l?c[a]:void 0,onBoxModified:function(e){h(v({box:e}))},cancelEditMode:function(){h(p({editMode:!1}))}};return r.a.createElement("div",S,r.a.createElement(O,D),c.map(function(e,t){return r.a.createElement(u,{key:e.id,box:e,isActive:t===a})}))}var I={boxes:[],selectedIndex:-1,editMode:!1},P=function(e){return{createBoxes:function(t){var n=t.count,o=t.width,r=t.height;e.boxes=new Array(n).fill(0).map(function(e,t){return{id:"box-".concat(t+1),top:Math.random()*(r-70),left:Math.random()*(o-200),width:200,height:70,text:"Box ".concat(t+101)}})},selectBoxAtPoint:function(t){var n=t.x,o=t.y;e.selectedIndex=e.boxes.reduce(function(t,r,c){var a=r.left,i=r.left+r.width,u=r.top,l=r.top+r.height;return n>=a&&n<=i&&o>=u&&o<=l&&(-1!==t&&c!==e.selectedIndex||(t=c)),t},-1)},moveBox:function(t){var n=t.x,o=t.y,r=t.offsetX,c=t.offsetY,a=e.boxes,i=e.selectedIndex;-1!==i&&(a[i].left=n-r,a[i].top=o-c)},setBoxEditMode:function(t){e.editMode=t},updateSelectedBox:function(t){var n=e.boxes,o=e.selectedIndex;-1!==o&&(n[o]=t)}}},k=n(22),S=n.n(k);function D(){var e=S()(P,I),t=Object(i.a)(e,2),n=t[0],c=n.boxes,a=n.selectedIndex,l=n.editMode,f=t[1],d=f.createBoxes,s=f.selectBoxAtPoint,b=f.moveBox,p=f.setBoxEditMode,v=f.updateSelectedBox,x=Object(o.useRef)(null);Object(o.useEffect)(function(){var e=x.current.getBoundingClientRect(),t=e.width,n=e.height;d({width:t,height:n,count:10})},[d]);var h=S()(function(e){return{editItem:function(e){var t=e.x,n=e.y;s({x:t,y:n}),p(!0)},findItem:s,dragItem:b,dragComplete:function(){}}},{}),m=Object(i.a)(h,2)[1],j=C(x,m),E=j.onPointerDown,g=j.onPointerMove,w=j.onPointerUp,y=j.onPointerCancel,M={className:"boxes",ref:x,onPointerDown:E,onPointerMove:g,onPointerUp:w,onPointerCancel:y},B={box:l?c[a]:void 0,onBoxModified:function(e){v(e)},cancelEditMode:function(){p(!1)}};return r.a.createElement("div",M,r.a.createElement(O,B),c.map(function(e,t){return r.a.createElement(u,{key:e.id,box:e,isActive:t===a})}))}n(34);n(35);a.a.render(r.a.createElement(function(){var e=Object(o.useState)(1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(o.useCallback)(function(e){c(Number(e.target.value))},[c]),u=1===n?r.a.createElement(B,null):r.a.createElement(D,null);return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement("h2",null,"React Mouse/Touch Events Demo"),r.a.createElement("p",null,"Source:",r.a.createElement("a",{href:"https://github.com/dfbaskin/react-mouse-touch-events"},"https://github.com/dfbaskin/react-mouse-touch-events")),r.a.createElement("p",{onChange:a},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"hooks-type",value:1,defaultChecked:!0})," ","Standard Hooks"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"hooks-type",value:2})," useMethods"))),r.a.createElement("div",null,u))},null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.cb60dab6.chunk.js.map